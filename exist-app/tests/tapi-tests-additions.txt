declare
    %test:assertTrue
function tt:is-item-endpoint-http200() {
    let $url := $tc:server || "/textapi/ahikar/syriac/sample_edition-82a/latest/item.json"
    return
        tc:is-endpoint-http200($url)
};

declare
    (: check if all parts are present.
     : no further tests are needed since the content has been tested while testing
     : the underlying function. :)
    %test:assertXPath("map:contains($result, 'textapi')")
    %test:assertXPath("map:contains($result, 'title')")
    %test:assertXPath("map:contains($result, 'type')")
    %test:assertXPath("map:contains($result, 'n')")
    %test:assertXPath("map:contains($result, 'content')")
    %test:assertXPath("map:contains($result, 'content-type')")
    %test:assertXPath("map:contains($result, 'lang')")
    %test:assertXPath("map:contains($result, 'langAlt')")
    %test:assertXPath("map:contains($result, 'image')")
function tt:endpoint-item() as item() {
    let $url := $tc:server || "/textapi/ahikar/syriac/sample_edition-82a/latest/item.json"
    let $req := tc:make-request($url)
    return http:send-request($req)[2]
        => util:base64-decode()
        => parse-json()
};
