
declare
    %test:args("sample_edition", "82a") %test:assertEquals("http://0.0.0.0:8080/exist/restxq/api/images/restricted/3r1nz/50.03,0.48,49.83,100.00")
    (: the following file is test data created by setUp :)
    %test:args("ahiqar_agg_wo_tile", "82a") %test:assertEquals("http://0.0.0.0:8080/exist/restxq/api/images/restricted/3r1nz")
function titemt:make-facsimile-id($manifest-uri as xs:string,
    $page as xs:string)
as xs:string {
    tapi-item:make-facsimile-id($manifest-uri, $page, $tc:server)
};

declare
    %test:args("3qzg5") %test:assertEquals("http://0.0.0.0:8080/exist/restxq/api/images/public/3qzg5")
    %test:args("3r1nz") %test:assertEquals("http://0.0.0.0:8080/exist/restxq/api/images/restricted/3r1nz")
    %test:assumeInternetAccess("https://textgridlab.org/1.0/tgcrud-public/rest/")
function titemt:make-img-url-prefix($facsimile-uri as xs:string)
as xs:string {
    tapi-item:make-img-url-prefix($facsimile-uri, $tc:server)
};

declare
    %test:args("3qzg5") %test:assertEquals("public/")
    %test:args("3r1nz") %test:assertEquals("restricted/")
    %test:assumeInternetAccess("https://textgridlab.org/1.0/tgcrud-public/rest/")
function titemt:make-restricted-or-public-path-component($facsimile-uri as xs:string)
as xs:string {
    tapi-item:make-restricted-or-public-path-component($facsimile-uri)
};

declare
    %test:args("3r1nz") %test:assertEquals("http://0.0.0.0:8080/exist/restxq/api/images/restricted/3r1nz")
function titemt:make-url-for-single-page-image($facsimile-uri as xs:string)
as xs:string {
    tapi-item:make-url-for-single-page-image($facsimile-uri, $tc:server)
};

declare
    %test:args("3r1nz", "sample_edition", "82a") %test:assertEquals("http://0.0.0.0:8080/exist/restxq/api/images/restricted/3r1nz/50.03,0.48,49.83,100.00")
function titemt:make-url-for-double-page-image($facsimile-uri as xs:string,
    $manifest-uri as xs:string,
    $page as xs:string)
as xs:string {
    tapi-item:make-url-for-double-page-image($facsimile-uri, $manifest-uri, $page, $tc:server)
};